<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <!-- ephedrine -->
  <!-- drug -->
  <ThingDef ParentName="MakeableDrugPillBase">
    <defName>BMT_Ephedrine</defName>
    <label>ephedrine</label>
    <description>Ephedrine made of a ephedra and herbal medecine. Used to help with asthma and boost immunity.</description>
    <descriptionHyperlinks>
      <HediffDef>BMT_EphedraHigh</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>BMT_Prehistoric/Item/Resource/Raw/RawEphedra</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <socialPropernessMatters>false</socialPropernessMatters>
    <techLevel>Industrial</techLevel>
    <statBases>
      <MarketValue>5</MarketValue>
      <Mass>0.05</Mass>
      <Flammability>0.7</Flammability>
    </statBases>
    <ingestible>
      <drugCategory>Medical</drugCategory>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>BMT_EphedrineHigh</hediffDef>
          <severity>1</severity>
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
      <!--researchPrerequisite>PenoxycylineProduction</researchPrerequisite-->
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
    </recipeMaker>
    <costList>
      <BMT_EphedraLeaves>5</BMT_EphedraLeaves>
      <MedicineHerbal>1</MedicineHerbal>
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <addictiveness>0</addictiveness>
      </li>
    </comps>
    <allowedArchonexusCount>20</allowedArchonexusCount>
  </ThingDef>

  <!-- hediff -->
  <HediffDef>
    <defName>BMT_EphedrineHigh</defName>
    <label>ephedrine</label>
    <description>Ephedrine.</description>
    <hediffClass>Hediff_High</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>false</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
      <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
    <stages>
      <li>
        <lifeThreatening>false</lifeThreatening>
        <statOffsets>
          <ImmunityGainSpeed>0.2</ImmunityGainSpeed>
          <InjuryHealingFactor>-0.4</InjuryHealingFactor>
        </statOffsets>
        <capMods>
          <li>
            <capacity>Breathing</capacity>
            <offset>0.1</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>

  <!--methamphetamine-->
  <!-- drug -->
  <ThingDef ParentName="MakeableDrugPillBase">
    <defName>BMT_Methamphetamine</defName>
    <label>methamphetamine</label>
    <description>Methamphetamine.</description>
    <descriptionHyperlinks>
      <HediffDef>BMT_MethamphetamineHigh</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>BMT_Prehistoric/Item/Resource/Raw/RawEphedra</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <socialPropernessMatters>false</socialPropernessMatters>
    <techLevel>Industrial</techLevel>
    <statBases>
      <MarketValue>5</MarketValue>
      <Mass>0.05</Mass>
      <Flammability>0.7</Flammability>
    </statBases>
    <ingestible>
      <drugCategory>Medical</drugCategory>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>BMT_MethamphetamineLow</hediffDef>
          <severity>0.2</severity>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>BMT_MethamphetamineHigh</hediffDef>
          <severity>1</severity>
        </li>
        <li Class="IngestionOutcomeDoer_OffsetNeed">
          <need>Rest</need>
          <offset>0.3</offset>
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
      <!--researchPrerequisite>PenoxycylineProduction</researchPrerequisite-->
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
    </recipeMaker>
    <costList>
      <BMT_EphedraLeaves>5</BMT_EphedraLeaves>
      <MedicineHerbal>1</MedicineHerbal>
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <addictiveness>0</addictiveness>
      </li>
    </comps>
    <allowedArchonexusCount>20</allowedArchonexusCount>
  </ThingDef>

  <!-- hediff -->
  <HediffDef>
    <defName>BMT_MethamphetamineHigh</defName>
    <label>methamphetamine</label>
    <description>Methamphetamine.</description>
    <hediffClass>Hediff_High</hediffClass>
    <defaultLabelColor>(0,0.7,0.5)</defaultLabelColor>
    <scenarioCanAdd>false</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
      <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
    <stages>
      <li>
        <restFallFactor>-2</restFallFactor>
        <socialFightChanceFactor>1.2</socialFightChanceFactor>
        <painFactor>0.2</painFactor>
        <lifeThreatening>false</lifeThreatening>
        <statOffsets>
          <!--restFallFactor>0</restFallFactor-->
          <InjuryHealingFactor>-0.4</InjuryHealingFactor>
        </statOffsets>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>0.2</offset>
          </li>
          <li>
            <capacity>Breathing</capacity>
            <offset>0.1</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>

  <HediffDef ParentName="AddictionBase">
    <defName>BMT_PhenethylaminesAddiction</defName>
    <label>methamphetamine</label>
    <description>Methamphetamine.</description>
    <hediffClass>Hediff_Addiction</hediffClass>
    <!--defaultLabelColor>(0,0.7,0.5)</defaultLabelColor-->
    <scenarioCanAdd>false</scenarioCanAdd>
    <maxSeverity>1</maxSeverity>
    <causesNeed>BMT_Chemical_Phenethylamines</causesNeed>
    <isBad>true</isBad>
    Chemical
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.0</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
      <li Class="HediffCompProperties_DisappearsOnDeath"/>
    </comps>
    <stages>
      <li>
        <label>day one</label>
        <restFallFactorOffset>0.333</restFallFactorOffset>
        <lifeThreatening>false</lifeThreatening>
        <statOffsets>
        </statOffsets>
        <capMods>
        </capMods>
      </li>
      <li>
        <minSeverity>0.2</minSeverity>
        <label>day two</label>
        <restFallFactorOffset>0.666</restFallFactorOffset>
        <lifeThreatening>false</lifeThreatening>
        <statOffsets>
        </statOffsets>
        <capMods>
        </capMods>
      </li>
      <li>
        <minSeverity>0.4</minSeverity>
        <label>day three</label>
        <restFallFactorOffset>0.999</restFallFactorOffset>
        <lifeThreatening>false</lifeThreatening>
        <statOffsets>
        </statOffsets>
        <capMods>
        </capMods>
      </li>
      <li>
        <minSeverity>0.6</minSeverity>
        <label>day four</label>
        <restFallFactorOffset>1.333</restFallFactorOffset>
        <lifeThreatening>false</lifeThreatening>
        <statOffsets>
        </statOffsets>
        <capMods>
        </capMods>
      </li>
      <li>
        <minSeverity>0.8</minSeverity>
        <label>day five</label>
        <restFallFactorOffset>1.666</restFallFactorOffset>
        <lifeThreatening>false</lifeThreatening>
        <statOffsets>
        </statOffsets>
        <capMods>
        </capMods>
      </li>
      <li>
        <minSeverity>0.9</minSeverity>
        <label>day six</label>
        <restFallFactorOffset>1.999</restFallFactorOffset>
        <lifeThreatening>true</lifeThreatening>
        <deathMtbDays>5</deathMtbDays>
        <statOffsets>
        </statOffsets>
        <capMods>
        </capMods>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>BMT_MethamphetamineWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>BMT_MethamphetamineAddiction</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <label>one night awake</label>
        <description>I am awake for one day. I am feeling good.</description>
        <baseMoodEffect>5</baseMoodEffect>
      </li>
      <li>
        <label>two nights awake</label>
        <description>I'm a bit wobbly! Bui i am OK.</description>
        <baseMoodEffect>8</baseMoodEffect>
      </li>
      <li>
        <label>three nights awake</label>
        <description>Who? What? I should sleep a while.</description>
        <baseMoodEffect>0</baseMoodEffect>
      </li>
      <li>
        <label>four nights awake</label>
        <description>I really should sleep. I... I feel strange.</description>
        <baseMoodEffect>-10</baseMoodEffect>
      </li>
      <li>
        <label>five nights awake</label>
        <description>I don't want to die. I can feel it.</description>
        <baseMoodEffect>-20</baseMoodEffect>
      </li>
      <li>
        <visible>false</visible>
      </li>
    </stages>
  </ThoughtDef>

  <ChemicalDef>
    <defName>BMT_Chemical_Phenethylamines</defName>
    <label>phenethylamines</label>
    <addictionHediff>BMT_PhenethylaminesAddiction</addictionHediff>
    <canBinge>false</canBinge>
  </ChemicalDef>

</Defs>